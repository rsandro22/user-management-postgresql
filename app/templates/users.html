<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Users</title>
</head>
<body>
<h1>Users</h1>
<nav>
<a href="/">Home</a> <a href="/roles">Roles</a> <a href="/audit">Audit</a> <a href="/logout">Logout</a>
</nav>

{% if session.is_admin %}
<h2>Add User (Admin only)</h2>
<form action="/users/add" method="post">
    Username: <input type="text" name="username" required>
    Email: <input type="email" name="email" required>
    Password: <input type="password" name="password" required>
    <button type="submit">Add User</button>
</form>
{% endif %}

<table border="1">
<tr>
<th>ID</th>
<th>Username</th>
<th>Email</th>
<th>Created</th>
<th>Type</th>
{% if session.is_admin %}<th>Actions</th>{% endif %}
</tr>

{% for user in users %}
<tr>
<td>{{ user.id }}</td>
<td>{{ user.username }}</td>
<td>{{ user.email }}</td>
<td>{{ user.created_at }}</td>
<td>{{ user.user_type }}</td>
{% if session.is_admin %}
<td>
<form action="/users/delete/{{ user.id }}" method="post">
<button type="submit">Delete</button>
</form>
</td>
{% endif %}
</tr>
{% endfor %}
</table>
</body>
</html>
